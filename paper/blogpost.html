<h2>PyFRET: An Open Source Software Package for smFRET</h2>

<p>by <a href="http://rrm33.user.srcf.net/">Rebecca Murphy</a>, a PhD student working for <a href="http://www.klenermangroup.co.uk/index.htm">David Klenerman</a> and <a href="http://www-jackson.ch.cam.ac.uk/">Sophie Jackson</a> at the <a href="http://www.ch.cam.ac.uk/">Department of Chemistry</a>, University of Cambridge.</p>

<p>Poor documentation, <a href="http://www.nature.com/nature/journal/v467/n7317/pdf/467775a.pdf">bugs</a>, <a href="http://www.americanscientist.org/issues/pub/2006/1/wheres-the-real-bottleneck-in-scientific-computing">errors</a> and <a href="http://www.ploscompbiol.org/article/info%3Adoi%2F10.1371%2Fjournal.pcbi.0020087">spaghetti code</a>: the problems in scientific software development are well known. My research field, single-molecule fluorescence (<a href="http://en.wikipedia.org/wiki/Single-molecule_FRET">smFRET</a>), faces an additional challenge: a complete lack of any standard software for data analysis. Each research group maintains their own code-base, with software written in programming languages from C++ to Labview. </p>

<p>Whenever methodological improvements are published, we scramble to implement our own versions, based on sketchy outlines crammed into the supplementary methods of high-profile papers. Without access to source code, it is hard to verify that published analyses perform as reported, or that our own attempted reimplementations behave as they should.</p>

<p>Frustrated by the time wasted debugging bloated analysis scripts and embarrassed by the poor quality of my own code, I decided to create an open source library for data analysis. PyFRET, a fully open-source python library for smFRET data analysis, provides some simple tools for data processing. I hope that it will be used both as a general data analysis tool; a benchmark against which novel analyses can be compared; and a library to which new techniques can be added for general use by our research community.</p>

<p>As a first-time creator of open source software, I thought that my greatest difficulties would be with writing good, well-structured, usable code. However, with plenty of experience analysing smFRET data, I already knew exactly what my library needed to do. Instead, other challenges presented themselves.</p> 

<p>Firstly, there were decisions about what exactly should be included and what data formats pyFRET should support. So far, pyFRET provides the minimal functionality required for analysis of smFRET data and supports direct parsing of the data files used in my research group, but does not implement all of the more advanced algorithms for data analysis. A minimal release allows fast feedback from other users about what else is needed, what is unnecessary and what is hard to use. Releasing a small, well-tested library allows me to make quick improvements to the codebase and to add required features as needed.</p>

<p>Secondly, I needed to learn how to package. <a href="https://pypi.python.org/pypi">PyPI</a>, the Python Package Index, was an obvious starting point, but understanding the requirements for PyPI hosting was challenging. Tarek Ziade's <a href="http://guide.python-distribute.org/">The Hitchhiker's Guide to Packaging</a>, a tutorial for novice distributers, proved an invaluable resource. I also discovered (sadly only after four uploads of broken code to PyPI) that there is a <a href="https://testpypi.python.org/pypi">PyPI testing site</a> that allows debugging before live release.</p>

<p>Packaging was one thing, documentation another. For python users, <a href="http://sphinx-doc.org/">sphinx</a>, a documentation generator that builds html pages and pdfs from <a href="http://docutils.sourceforge.net/docs/user/rst/quickstart.html">restructured text</a> is a very nice tool for creating high-quality documentation. Unfortunately, I found myself utterly confused by its own documentation. Eventually, after some desperate googling ("Why is sphinx so hard to use?") I found a <a href="http://codeandchaos.wordpress.com/2012/07/30/sphinx-autodoc-tutorial-for-dummies/">tutorial "for dummies"</a>, which allowed me to get started. <a href="http://pyfret.readthedocs.org/en/latest/">PyFRET's tutorial</a>, hosted on <a href="https://readthedocs.org/">ReadTheDocs</a> now looks good, but still lacks a detailed reference (coming soon).</p>

<p>My final difficulty came from dependencies. PyFRET uses three other python libraries - numpy, scipy and matplotlib - for numerical programming and plotting data. For a new user, dependencies present a large barrier to using the software. I had hoped that the pip install system used by PyPI would detect and automatically install missing packages. Unfortunately, Matplotlib <a href="http://stackoverflow.com/questions/8359383/error-while-installing-matplotlib">does not play nicely</a> with pip install and first attempts to install pyFRET on a colleague's laptop ended in failure. We were saved by <a href="https://store.continuum.io/cshop/anaconda/">Anaconda</a> a free distribution of 125 of the most common python libraries for scientific programming. Installing Anaconda is a single step process, converting a nightmare of error messages into a few simple clicks.</p>

<p>Overall, I was surprised by the number of challenges involved in taking an already mature project and packaging it for open source release. Although each individual step - writing clear documentation, packaging, handling dependencies - does not have to be difficult, learning everything simultaneously was a steep learning curve.</p>

<p>PyFRET now meets nine of 11 points on the Software Sustainability Institute's <a href="http://www.software.ac.uk/resources/guides/ready-release">Release checklist</a> and initial feedback from my research group has been positive. But there is still more work to do. After all, the greatest test of scientific software is its use in research. The next challenge is to collect and analyse some real data using pyFRET. Extensive experimentation awaits.</p>